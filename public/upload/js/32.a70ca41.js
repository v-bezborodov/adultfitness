(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[32],{VJg1:function(e,t,l){"use strict";l.r(t);var n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("q-page",{staticClass:"flex flex-start"},[l("div",{staticClass:"container overflow-hidden"},[l("q-card",{staticClass:"text-primary black-shadow q-ma-sm"},[l("q-card-main",[l("q-table",{attrs:{dark:"",color:"secondary",title:"List of users",columns:e.columns,data:e.selectedUsers()},scopedSlots:e._u([{key:"body-cell-name",fn:function(e){return l("q-td",{attrs:{props:e}},[l("q-btn-group",[l("q-btn",{attrs:{label:e.row.name,to:{name:"profile.profile",params:{id:e.row.id}}}})],1)],1)}},{key:"body-cell-send",fn:function(t){return l("q-td",{attrs:{props:t}},[l("q-btn-group",["admin"!=t.row.role?l("q-btn",{attrs:{label:"Send"},on:{click:function(l){e.sendMessage(t)}}}):e._e()],1)],1)}},{key:"body-cell-edit",fn:function(t){return l("q-td",{attrs:{props:t}},[l("q-btn-group",["user"==t.row.role||"trainer"==t.row.role?l("q-btn",{attrs:{label:e.btnCaption(t.row)},on:{click:function(l){e.changeRole(t)}}}):e._e()],1)],1)}}])})],1),l("q-card-actions",{staticClass:"block text-right"},[l("q-select",{attrs:{dark:"","float-label":"Select user group",radio:"",options:e.userGroups},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1)])},r=[];n._withStripped=!0;l("INYr");var a=l("MVZn"),s=l.n(a),i=l("L2JU"),o={computed:s()({},Object(i["c"])({locale:"general/locale"})),mounted:function(){var e=this;this.getUsers().then(function(t){e.users=t.users})},methods:s()({},Object(i["b"])({getUsers:"auth/getUserList",setUserRole:"auth/setUserRole",sendEmail:"auth/sendEmail"}),{changeRole:function(e){var t=this;console.log(e);var l="user"==e.row.role?"trainer":"user";this.setUserRole({id:e.row.id,role:l}).then(function(n){t.users.findIndex(function(t){return t.id==e.row.id});var r=e.row;r.role=l})},btnCaption:function(e){return"user"==e.role?"Make a trainer":"Make user"},sendMessage:function(e){var t=this;this.$q.dialog({title:"Write message",message:"E-Mail content",color:"primary",prompt:{model:"",type:"textarea"}}).then(function(l){t.sendEmail({userId:e.row.id,message:l}).then(function(){t.$q.notify("Email sended")})}).catch(function(){})},selectedUsers:function(){var e=this;return this.users.filter(function(t){return t.role==e.filter||null==e.filter})}}),data:function(){return{filter:null,userGroups:[{label:"All",value:null},{label:"Admin",value:"admin"},{label:"Trainer",value:"trainer"},{label:"User",value:"user"}],users:[],columns:[{align:"left",name:"name",label:"Name of User",field:"name"},{align:"left",name:"email",label:"E-mail",field:"email"},{align:"left",name:"role",label:"Role of User",field:"role"},{name:"send",label:"E-Mail",field:"id"},{name:"edit",label:"Edit",field:"id"}],d:[{align:"left",name:"name",label:"Name of category",field:"name"},{name:"description",label:"Description",field:"content",align:"left"},{name:"send",label:"E-Mail",field:"id"},{name:"edit",label:"Edit",field:"id"}]}}},d=o,u=l("KHd+"),c=Object(u["a"])(d,n,r,!1,null,null,null);c.options.__file="users.vue";t["default"]=c.exports}}]);