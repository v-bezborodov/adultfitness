(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[35],{ExRv:function(t,e,a){"use strict";var i=a("gVKL"),o=a.n(i);o.a},Ijxk:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"q-pa-sm compact"},[a("q-card-media",[a("div",{staticClass:"video-pic",class:{activated:this.video.enabled},style:{backgroundImage:"url('"+t.video.link_preview+"')"}}),t.isAdmin||t.me.id==t.video.author.id?a("q-btn",{staticClass:"visibility",attrs:{type:"a",icon:t.video.enabled?"visibility":"visibility_off",round:"",dense:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.switchVisible(e)}}}):t._e(),a("q-btn",{staticClass:"visibility payed",attrs:{type:"a",icon:"attach_money",round:"",dense:"",visible:t.video.payed}}),t.isAdmin||t.me.id==t.video.author.id?a("q-btn",{staticClass:"visibility edit",attrs:{type:"a",icon:"edit",round:"",dense:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.clickByVideo(e)}}}):t._e()],1),a("q-card-title",{staticClass:"q-py-none q-px-sm"},[a("span",{staticClass:"text-overflow",domProps:{textContent:t._s(t.video.title)}})])],1)},o=[];i._withStripped=!0;var l=a("MVZn"),s=a.n(l),c=a("L2JU"),n={data:function(){return{locale:"ru",video_id:""}},computed:s()({},Object(c["c"])({isAdmin:"auth/isAdmin",me:"auth/me"})),methods:s()({},Object(c["b"])({setVisible:"video/setVisible",startEdit:"video/startEdit"}),{switchVisible:function(){this.setVisible({id:this.video.id,visible:!this.video.enabled})},clickByVideo:function(){this.startEdit(this.video.id)}}),props:{video:{}},mounted:function(){}},r=n,d=(a("ExRv"),a("KHd+")),u=Object(d["a"])(r,i,o,!1,null,null,null);u.options.__file="compact.vue";e["a"]=u.exports},Mo8P:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex flex-start"},[a("div",{staticClass:"container overflow-hidden"},[a("q-card",{staticClass:"text-primary black-shadow q-ma-sm"},[a("q-card-title",{domProps:{textContent:t._s(t.formTitle)}}),a("q-card-main",[a("q-tabs",{attrs:{color:"secpndary"},model:{value:t.g_tab,callback:function(e){t.g_tab=e},expression:"g_tab"}},[a("q-tab",{attrs:{slot:"title",name:"general",label:t.$t("cat.info")},slot:"title"}),t.category.id?a("q-tab",{attrs:{slot:"title",name:"videos",label:t.$t("cat.videos")},slot:"title"}):t._e(),a("q-tab-pane",{attrs:{name:"general"}},[a("q-field",{staticClass:"q-mb-sm",attrs:{icon:"reorder"}},[a("q-input",{attrs:{dark:"","float-label":t.$t("cat.weight")},model:{value:t.category.position,callback:function(e){t.$set(t.category,"position",e)},expression:"category.position"}})],1),a("q-field",{staticClass:"q-mb-sm",attrs:{icon:"link"}},[a("q-input",{attrs:{dark:"","float-label":t.$t("cat.slug")},model:{value:t.category.slug,callback:function(e){t.$set(t.category,"slug",e)},expression:"category.slug"}})],1),a("q-tabs",{attrs:{color:"secondary"},model:{value:t.current_locale,callback:function(e){t.current_locale=e},expression:"current_locale"}},[t._l(t.locales,function(t){return a("q-tab",{key:t.value,attrs:{slot:"title",name:t.value,label:t.label},slot:"title"})}),t._l(t.locales,function(e){return a("q-tab-pane",{key:e.value,attrs:{dark:"",name:e.value}},[a("q-field",{staticClass:"q-mb-sm",attrs:{icon:"title"}},[a("q-input",{attrs:{dark:"","float-label":t.$t("cat.title")},model:{value:t.category.locales[e.value].title,callback:function(a){t.$set(t.category.locales[e.value],"title",a)},expression:"category.locales[locale.value].title"}})],1),a("q-field",{staticClass:"q-mb-sm",attrs:{icon:"info"}},[a("q-input",{attrs:{dark:"","float-label":t.$t("cat.description")},model:{value:t.category.locales[e.value].description,callback:function(a){t.$set(t.category.locales[e.value],"description",a)},expression:"category.locales[locale.value].description"}})],1),a("q-field",{staticClass:"q-mb-sm",attrs:{icon:"label"}},[a("q-input",{attrs:{dark:"","float-label":t.$t("cat.meta")},model:{value:t.category.locales[e.value].meta_desc,callback:function(a){t.$set(t.category.locales[e.value],"meta_desc",a)},expression:"category.locales[locale.value].meta_desc"}})],1),a("q-field",{staticClass:"q-mb-sm",attrs:{icon:"vpn_key"}},[a("q-input",{attrs:{dark:"","float-label":t.$t("cat.keyword")},model:{value:t.category.locales[e.value].meta_keyword,callback:function(a){t.$set(t.category.locales[e.value],"meta_keyword",a)},expression:"category.locales[locale.value].meta_keyword"}})],1)],1)})],2)],1),a("q-tab-pane",{attrs:{name:"videos"}},[a("q-card",[a("q-card-actions",[a("q-field",{staticClass:"full-width",attrs:{color:"secondary",icon:"video_library"}},[a("q-select",{attrs:{dark:"",filter:"","float-label":t.$t("cat.addVideo"),options:t.allVideos},on:{input:t.attachVideo},model:{value:t.video_id,callback:function(e){t.video_id=e},expression:"video_id"}})],1)],1),a("q-card-media",t._l(t.category.videos,function(t){return a("a-video-compact",{key:t.id,attrs:{video:t}})}))],1)],1)],1)],1),a("q-card-actions",{staticClass:"block text-right"},[a("q-btn",{attrs:{type:"a",label:"Save"},on:{click:t.save}})],1)],1)],1)])},o=[];i._withStripped=!0;var l=a("MVZn"),s=a.n(l),c=a("L2JU"),n=a("Ijxk"),r={computed:s()({},Object(c["c"])({locales:"general/locales",me:"auth/me",sourceVideos:"source/videos"}),{formTitle:function(){var t=this.category.id?"edit":"create";return this.$t("cat.".concat(t))},allVideos:function(){return this.sourceVideos.map(function(t){return{label:t.locales.en.title,value:t}})}}),components:{"a-video-compact":n["a"]},methods:s()({},Object(c["b"])({getCategory:"video/getCategory",updateCategory:"video/updateCategory",getVideoFromSource:"source/getVideos"}),{filter:function(t){console.log(t)},save:function(){this.updateCategory(this.category)},attachVideo:function(t){t&&(this.category.videos.push(t),this.video_id=null)}}),mounted:function(){var t=this;this.current_locale=this.locales[0].value;var e=this.$route.params.id;this.getCategory(e).then(function(e){console.log("mounted",e),t.category=e.category,t.getVideoFromSource()})},data:function(){return{current_locale:"",g_tab:"general",category:{id:null,position:"0",locales:{en:{},ru:{}},videos:[]},video_id:""}}},d=r,u=a("KHd+"),v=Object(u["a"])(d,i,o,!1,null,null,null);v.options.__file="category.vue";e["default"]=v.exports},gVKL:function(t,e,a){}}]);