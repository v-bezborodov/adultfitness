(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[38],{VJg1:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"flex flex-start"},[a("div",{staticClass:"container overflow-hidden"},[a("q-card",{staticClass:"text-primary black-shadow q-ma-sm"},[a("q-card-main",[a("q-table",{attrs:{dark:"",color:"secondary",title:"List of users",columns:e.columns,data:e.selectedUsers()},scopedSlots:e._u([{key:"body-cell-name",fn:function(e){return a("q-td",{attrs:{props:e}},[a("q-btn-group",[a("q-btn",{attrs:{type:"a",label:e.row.name,to:{name:"profile.profile",params:{id:e.row.id}}}})],1)],1)}},{key:"body-cell-send",fn:function(t){return a("q-td",{attrs:{props:t}},[a("q-btn-group",["admin"!=t.row.role?a("q-btn",{attrs:{type:"a",label:"Send"},on:{click:function(a){e.toUser=t,e.sendMessageDialog=!0}}}):e._e()],1)],1)}},{key:"body-cell-edit",fn:function(t){return a("q-td",{attrs:{props:t}},[a("q-btn-group",["user"==t.row.role||"trainer"==t.row.role?a("q-btn",{attrs:{type:"a",label:e.btnCaption(t.row)},on:{click:function(a){e.changeRole(t)}}}):e._e()],1)],1)}}])})],1),a("q-card-actions",{staticClass:"block text-right"},[a("q-select",{attrs:{dark:"","float-label":"Select user group",radio:"",options:e.userGroups},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1),a("q-dialog",{staticClass:"message_dialog",on:{cancel:function(t){e.sendMessageDialog=!1},hide:function(t){e.sendMessageDialog=!1}},scopedSlots:e._u([{key:"buttons",fn:function(t){return[a("q-btn",{attrs:{type:"a",color:"primary",label:"Ok"},on:{click:e.sendMessage}}),a("q-btn",{attrs:{type:"a",color:"negative",label:"Cancel"},on:{click:function(t){e.sendMessageDialog=!1}}})]}}]),model:{value:e.sendMessageDialog,callback:function(t){e.sendMessageDialog=t},expression:"sendMessageDialog"}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v("Write message")]),a("div",{attrs:{slot:"body"},slot:"body"},[a("q-field",[a("q-input",{attrs:{type:"textarea","float-label":"E-Mail content","max-height":100,rows:"7"},model:{value:e.messageText,callback:function(t){e.messageText=t},expression:"messageText"}})],1)],1)])],1)},s=[];l._withStripped=!0;a("INYr");var n=a("MVZn"),r=a.n(n),i=a("L2JU"),o={computed:r()({},Object(i["c"])({locale:"general/locale"})),mounted:function(){var e=this;this.getUsers().then(function(t){e.users=t.users})},methods:r()({},Object(i["b"])({getUsers:"auth/getUserList",setUserRole:"auth/setUserRole",sendEmail:"auth/sendEmail"}),{changeRole:function(e){var t=this;console.log(e);var a="user"==e.row.role?"trainer":"user";this.setUserRole({id:e.row.id,role:a}).then(function(l){t.users.findIndex(function(t){return t.id==e.row.id});var s=e.row;s.role=a})},btnCaption:function(e){return"user"==e.role?"Make a trainer":"Make user"},sendMessage:function(){var e=this;this.sendEmail({userId:this.toUser.row.id,message:this.messageText}).then(function(){e.$q.notify("Email sended"),e.sendMessageDialog=!1,e.messageText=""})},selectedUsers:function(){var e=this;return this.users.filter(function(t){return t.role==e.filter||"all"==e.filter})}}),data:function(){return{sendMessageDialog:!1,toUser:null,messageText:"",filter:"all",userGroups:[{label:"All",value:"all"},{label:"Admin",value:"admin"},{label:"Trainer",value:"trainer"},{label:"User",value:"user"}],users:[],columns:[{align:"left",name:"name",label:"Name of User",field:"name"},{align:"left",name:"email",label:"E-mail",field:"email"},{align:"left",name:"role",label:"Role of User",field:"role"},{name:"send",label:"E-Mail",field:"id"},{name:"edit",label:"Edit",field:"id"}],d:[{align:"left",name:"name",label:"Name of category",field:"name"},{name:"description",label:"Description",field:"content",align:"left"},{name:"send",label:"E-Mail",field:"id"},{name:"edit",label:"Edit",field:"id"}]}}},d=o,c=(a("bthF"),a("KHd+")),u=Object(c["a"])(d,l,s,!1,null,null,null);u.options.__file="users.vue";t["default"]=u.exports},Z3JL:function(e,t,a){},bthF:function(e,t,a){"use strict";var l=a("Z3JL"),s=a.n(l);s.a}}]);